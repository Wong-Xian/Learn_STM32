# 定时器概述

1. 软件定时器原理
   1. CPU等待，无法处理其他任务
2. 定时器定时原理
   1. 使用精准时基，通过硬件方式，实现功能
   2. 核心是计数器
3. STM32定时器分类
   1. 常规定时器
      1. 基本定时器
      2. 通用定时器
      3. 高级定时器
   2. 专用定时器
      1. 独立看门狗
      2. 窗口看门狗
      3. 实时时钟
      4. 低功耗定时器
   3. 内核定时器
      1. SysTick定时器
4. STM32定时器特性表
   1. 共8个定时器（都是16位）（整数预分频，1~65535）（可产生DMA请求）
      1. 基本定时器：6、7（递增）（无捕获/比较通道）（无互补输出）
      2. 通用定时器：2、3、4、5（递增、递减、中央对齐）（4个捕获/比较通道）（无互补输出）
      3. 高级定时器：1、8（递增、递减、中央对齐）（4个捕获/比较通道）（有互补输出）
5. STM32基本、通用、高级定时器功能区别
   1. 基本定时器：无输入输出通道，常用作时基。
   2. 通用定时器：具有多路独立通道，可用于输入捕获/输出比较，可用作时基。
   3. 高级定时器：除具备通用定时器所有功能外，具备带死区控制的互补信号输出、刹车输入功能。

# 基本定时器

1. 基本定时器简介
   1. TIM6 和 TIM7
   2. 16位 0~65535 递增计数器
   3. 16位预分频器 分频系数：1~65536
   4. 可用于触发DAC
   5. 更新事件（计数器溢出）时，可产生中断/DMA请求
2. 基本定时器框图
3. 定时器计数模式及溢出条件
   1. 递增 溢出条件 CNT == ARR(影子)
   2. 递减 溢出条件 CNT == 0
   3. 中心对齐 溢出条件 CNT == ARR-1 CNT == 1
4. 定时器中断实验相关寄存器
   1. 控制寄存器
      1. 位7：自动重装载预装载使能（有缓冲可以减小误差）
      2. 位0：计数器使能
   2. DMA中断使能寄存器
      1. 位8：更新DMA请求使能位（0禁止更新DMA请求，1允许更新DMA请求）
      2. 位0：更新中断使能（0禁止更新中断，1允许更新中断）
   3. 状态寄存器
      1. 位0：更新中断标志，更新中断时硬件置1，通过软件置0清除
   4. 计数寄存器CNT
      1. 共有16位，存储计数的值
   5. 预分频寄存器
      1. 16位，配置计数器时钟频率
      2. 计数器时钟频率=输入时钟频率 / (寄存器值+1)
   6. 自动重装载寄存器
      1. 16位，更新事件发生时，其值转移到对应影子寄存器中
5. 定时器溢出时间计算方法
   1. 溢出时间 = (自动重装载寄存器的值+1) * (预分频寄存器的值+1) / 定时器时钟源频率
6. 定时器中断实验配置步骤
7. 编程实战：定时器中断实验

# 通用定时器

# 高级定时器

# 总结